
<div *ngIf="isLoading" class="loader">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>

<div class="container p-5 mt-3 h-100 border">
    <div class="row">
      <div class="col-lg-4 col-md-4 mb-4">
        <div class="card1 p-3" >
        <div class="card-body">
          <h5 class="card-title ">Total Products Ordered</h5>
          <p class="card-text  text-success ">
            {{ orders.length }}
          </p>       
         </div>
      </div>
  </div>   
      <div class="col-lg-4 col-md-4 mb-4">
            <div class="card1 p-3" >
            <div class="card-body">
              <h5 class="card-title ">Total Price of Sales</h5>
              <p class="card-text text-success">{{ totalSales }}</p>
            </div>
          </div>
      </div>   
      <div class="col-lg-4 col-md-4 mb-4">
          <div class="card1 p-3" >
            <div class="card-body">
              <h5 class="card-title">Net Profit</h5>
              <p class="card-text text-success">  {{ totalSales / 10 }}</p>
            </div>
          </div>
        </div>
    </div>

      <div class="row">
        <div class="table-responsive">
          <table mat-table [dataSource]="dataSource" matSort class="table">
            <ng-container matColumnDef="orderID" class="col-lg-3">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">ProductID</th>
              <td mat-cell *matCellDef="let product">{{ product.product._id }}</td>
            </ng-container>
        
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">Title</th>
              <td mat-cell *matCellDef="let product">{{ product.product.en.title }}</td>
            </ng-container>
        
            <ng-container matColumnDef="image">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">Image</th>
              <td mat-cell *matCellDef="let product">
                <img [src]="product.product.thumbnail" class="img-thumbnail" alt="product image" />
              </td>
            </ng-container>
        
            <ng-container matColumnDef="quantity" class="text-center">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">Quantity</th>
              <td mat-cell *matCellDef="let product">{{ product.quantity }}</td>
            </ng-container>
        
            <ng-container matColumnDef="totalPrice">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Total Price</th>
              <td mat-cell *matCellDef="let product">
                {{ (+product.product.price || 0) * (+product.quantity || 0) }}
              </td>
            </ng-container>
        
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr> 
            </table>
        </div>
        
      </div>
    
  <mat-paginator
    #paginator
    style-paginator
    [pageIndex]="0"
    [pageSize]="2"
    [length]="50"
    [pageSizeOptions]="[4, 6, 8, 10]"
  >
  </mat-paginator>
</div>
